@using CakeExtracter.Common.MatchingPortal.Providers
@model CakeExtracter.Common.MatchingPortal.Models.ResultFilter

@{
    ViewBag.Title = "Product Data QA";
}

<h3>Product Data QA</h3>
<script>
    $(document).ready(function() {
        $(".chosen-select").chosen();
        $(".datepicker").datepicker({});
    })
</script>
<div class="row">
    @using (Html.BeginForm())
    {
        <hr />
        <div class="row">
            <div class="col-md-4">
                @Html.LabelFor(m => m.Categories, new { @class = "col-md-4 font-weight-bold" })
                <div class="col-md-8">
                    @Html.ListBoxFor(m => m.Categories, new MultiSelectList(SelectOptionsProvider.GetCategories()), new { @class = "form-control chosen-select" })
                </div>
            </div>
            <div class="col-md-4">
                @Html.LabelFor(m => m.ProductId, new { @class = "col-md-4 font-weight-bold" })
                <div class="col-md-8">
                    @Html.EditorFor(m => m.ProductId, new { htmlAttributes = new { @class = "form-control" } })
                </div>
            </div>
            <div class="col-md-4">
                @Html.LabelFor(m => m.DateRangeFrom, new { @class = "col-md-6 font-weight-bold" })
                <div class="col-md-6">
                    @Html.EditorFor(m => m.DateRangeFrom, new { htmlAttributes = new { @class = "form-control datepicker" } })
                </div>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-md-4">
                @Html.LabelFor(m => m.Brands, new { @class = "col-md-4 font-weight-bold" })
                <div class="col-md-8">
                    @Html.ListBoxFor(m => m.Brands, new MultiSelectList(SelectOptionsProvider.GetBrands()), new { @class = "form-control chosen-select" })
                </div>
            </div>
            <div class="col-md-4">
                @Html.LabelFor(m => m.ProductTitle, new { @class = "col-md-4 font-weight-bold" })
                <div class="col-md-8">
                    @Html.EditorFor(m => m.ProductTitle, new { htmlAttributes = new { @class = "form-control" } })
                </div>
            </div>
            <div class="col-md-4">
                @Html.LabelFor(m => m.DateRangeTo, new { @class = "col-md-6 font-weight-bold" })
                <div class="col-md-6">
                    @Html.EditorFor(m => m.DateRangeTo, new { htmlAttributes = new { @class = "form-control datepicker" } })
                </div>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-md-4">
                @Html.LabelFor(m => m.MatchedStatus, new { @class = "col-md-4 font-weight-bold" })
                <div class="col-md-8">
                    @Html.ListBoxFor(m => m.MatchedStatus, new MultiSelectList(SelectOptionsProvider.GetMatchedStatuses()), new { @class = "form-control chosen-select" })
                </div>
            </div>
            <div class="col-md-4">
                @Html.LabelFor(m => m.NumberOfResults, new { @class = "col-md-4 font-weight-bold" })
                <div class="col-md-8">
                    @Html.DisplayFor(m => m.NumberOfResults, new { htmlAttributes = new { @class = "form-control" } })
                </div>
            </div>
            <div class="col-md-4">
                @Html.LabelFor(m => m.PercentMatched, new { @class = "col-md-6 font-weight-bold" })
                <div class="col-md-6">
                    @Html.DisplayFor(m => m.PercentMatched, new { htmlAttributes = new { @class = "form-control" } })
                </div>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-md-4">
                <input type="submit" value="Apply Filters" class="btn btn-default btn-lg btn-block" formaction="@Url.Action("Result")" formmethod="post" />
            </div>
            <div class="col-md-4">
                <input type="submit" value="Export Full Data frame" class="btn btn-default btn-lg btn-block" formaction="@Url.Action("ExportFullFrame")" formmethod="post" />
            </div>
            <div class="col-md-4">
                <input type="submit" value="Export Client Data frame" class="btn btn-default btn-lg btn-block" formaction="@Url.Action("ExportClientFrame")" formmethod="post" />
            </div>
        </div>
    }
    <hr />
    <div class="row">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Product Image</th>
                    <th scope="col">Old Product Title</th>
                    <th scope="col">New Product Title</th>
                    <th scope="col">Product Description</th>
                    <th scope="col">Product ID</th>
                    <th scope="col">Brand</th>
                    <th scope="col">Matching Status</th>
                    <th scope="col">Matching Date</th>
                    <th scope="col">Url</th>
                </tr>
            </thead>
            <tbody>
                @if (Model != null && Model.Results != null && Model.Results.Any())
                {
                    foreach (var item in Model.Results)
                    {
                        <tr>
                            @{
                                var redirectUrl = Url.Action("Match", "Products", new { id = item.RedirectId, returnToResults = true });
                            }
                            <td><img src="@item.ProductImage" height="75px" /></td>
                            <td>
                                <a href="@redirectUrl">@item.OldProductTitle</a>
                            </td>
                            <td>
                                <a href="@redirectUrl">@item.NewProductTitle</a>
                            </td>
                            <td>@item.ProductDescription</td>
                            <td>@item.ProductId</td>
                            <td>@item.Brand</td>
                            <td>@item.MatchedStatus</td>
                            <td>@item.MatchingDate.ToString("MM/dd/yyyy")</td>
                            <td><a href="@item.Url">@item.Url</a></td>

                        </tr>
                    }

                }
            </tbody>
        </table>
    </div>
</div>
