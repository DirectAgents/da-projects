@using CakeExtracter.Common.MatchingPortal.Providers
@model CakeExtracter.Common.MatchingPortal.Models.Product

<div id="carousel-example-generic" class="carousel slide container well">
    @using (Html.BeginForm("Match", "Products", FormMethod.Post))
    {
        @Html.HiddenFor(m => m.ProductId)
        <!-- Wrapper for slides -->
        <div class="col-md-offset-2 col-md-8" role="listbox">
            <h3>Product Matching Interface</h3>
            <div class="item">
                <div class="row">
                    <img src="@Model.ProductImageLink" alt="Product Image" class="col-md-4 col-md-offset-4">
                </div>
                <div class="row">
                    <a href="@Model.ProductPageLink" class="col-md-offset-5">Product Page</a>
                </div>
                <hr/>
                <div class="row">
                    @Html.LabelFor(m => m.OriginalProductTitle, new { @class = "col-md-4 font-weight-bold" })
                    <div class="col-md-6">
                        @Html.DisplayFor(m => m.OriginalProductTitle, new { htmlAttributes = new { @class = "form-control" } })
                    </div>
                </div>
                <hr/>
                <div class="row">
                    @Html.LabelFor(m => m.NewProductTitle, new { @class = "col-md-4 font-weight-bold" })
                    <div class="col-md-6">
                        @Html.TextBoxFor(m => m.NewProductTitle, new { @class = "form-control" })
                    </div>
                </div>
                <hr/>
                <div class="row">
                    @Html.LabelFor(m => m.ProductDescription, new { @class = "col-md-4 font-weight-bold" })
                    <div class="col-md-6">
                        @Html.TextAreaFor(m => m.ProductDescription, new { @class = "form-control" })
                    </div>
                </div>
                <div class="row">
                    <hr/>
                    @foreach (var item in SelectOptionsProvider.GetSearchResults(Model.ProductId))
                    {
                        <div class="row">
                            @Html.RadioButtonFor(m => m.MatchedResultId, item.Id, new { @class = "col-md-2 input-sm" })
                            <div class="col-md-8">
                                <div class="media">
                                    <div class="media-left">
                                        <a href="#">
                                            <img class="media-object" style="height: 72px" src="@item.ImageLink" alt="Search Result Image link">
                                        </a>
                                    </div>
                                    <div class="media-body">
                                        <h4 class="media-heading">@item.Headline</h4>
                                        <h4>
                                            Url: <a href="@item.ResultLink">@item.ResultLink</a>
                                        </h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr/>
                    }
                    <div class="row">
                        @Html.RadioButtonFor(m => m.MatchedResultId, 0, new { @class = "col-md-2 input-sm" })
                        <div class="col-md-8">
                            <p class="font-weight-bold">No match</p>
                        </div>
                    </div>
                </div>
                <hr/>
                <div class="row">
                    <button type="submit" class="btn btn-default btn-lg btn-block">Match</button>
                </div>
                <hr/>
            </div>
        </div>

        <!-- Controls -->
        <a class="left carousel-control" style="color: black" href="@Url.Action("Match", "Products", new { id = ViewBag.PreviousId == 0 ? Model.Id : ViewBag.PreviousId })" role="button">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>

        <a class="right carousel-control" style="color: black" href="@Url.Action("Match", "Products", new { id = ViewBag.NextId == 0 ? Model.Id : ViewBag.NextId })" role="button">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    }
</div>
