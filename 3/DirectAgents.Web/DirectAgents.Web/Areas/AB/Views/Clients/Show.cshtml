@model DirectAgents.Domain.Entities.AB.ABClient

<h2>Client Info</h2>

Id: @Model.Id<br />
Name: @Model.Name<br />
ExtCredit: @Model.ExtCredit<br />
IntCredit: @Model.IntCredit<br />
[@Html.ActionLink("edit", "Edit", new { id = Model.Id })]
<br /><br />

@if (Model.ClientBudgets != null && Model.ClientBudgets.Any())
{
    var cb = Model.ClientBudgets.OrderByDescending(x => x.Date).First();
    <text>@cb.Date.ToShortDateString() Budget: @cb.Value
    &nbsp; &nbsp;@Html.ActionLink("testlink", "EditViaLink", "ClientBudgets", new { clientId = cb.ClientId, date = cb.Date.ToShortDateString(), value = cb.Value }, null)</text>
} else {
    <text>[@Html.ActionLink("new budget", "NewBudget", new { id = Model.Id })]</text>
}
<br /><br />

Payments:
<table>
@foreach (var payment in Model.ClientPayments.OrderBy(x => x.Date))
{
    <tr>
        <td>@payment.Date.ToShortDateString()</td>
        <td>@payment.TotalValue()</td>
        <td>@Html.ActionLink("testlink", "EditViaLink", "ClientPayments", new { id = payment.Id, date = payment.Date.ToShortDateString(), value = payment.TotalValue() }, null)</td>
    </tr>
}
</table>
[@Html.ActionLink("new payment", "NewPayment", new { id = Model.Id })]
<br /><br />

Links:<br />
@Html.ActionLink("Summary View", "Client", "Dashboard", new { id = Model.Id }, null)<br />
@Html.ActionLink("List All Clients", "Index")