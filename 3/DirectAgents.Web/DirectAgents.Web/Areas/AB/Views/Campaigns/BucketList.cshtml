@model DirectAgents.Domain.Entities.AB.ClientAccount
@{
    var campaigns = (IEnumerable<DirectAgents.Domain.Entities.AB.Campaign>)ViewBag.Campaigns;
    var bucketCampaignIds = Model.SpendBuckets.Select(x => x.CampaignId).ToArray();
}
<h2>Campaigns/SpendBuckets</h2>

Client: @Html.ActionLink(Model.Client.Name, "Show", "Clients", new { id = Model.ClientId }, null)<br />
Account: @Html.ActionLink(Model.Name, "Show", "ClientAccounts", new { id = Model.Id }, null)<br />
<br />

<table>
<tr>
    <td>Campaign</td>
    <td>Bucket?</td>
</tr>
@foreach (var camp in campaigns.OrderBy(x => x.Name))
{
    bool hasBucket = bucketCampaignIds.Contains(camp.Id);
    <tr>
        <td>@camp.Name</td>
        <td>
            @if (hasBucket) {
                <text>Y</text>
            } else {
                @Html.ActionLink("create", "New", "SpendBuckets", new { acctId = Model.Id, campId = camp.Id }, null)
            }
        </td>
    </tr>
}
</table>
[@Html.ActionLink("new", "New", "SpendBuckets", new { acctId = Model.Id }, null)]