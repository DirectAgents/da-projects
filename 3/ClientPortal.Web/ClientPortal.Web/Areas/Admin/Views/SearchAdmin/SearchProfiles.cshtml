@model IEnumerable<ClientPortal.Data.Contexts.SearchProfile>

@{
    var ajaxOptions = new AjaxOptions()
    {
        UpdateTargetId = "searchProfilesTab"
    };
}

<table border="1">
    <tr>
        <th></th>
        <th>SearchProfile</th>
        <th>Login</th>
        <th>Reports</th>
    </tr>
@foreach (var profile in Model)
{
    <tr>
        <td>@Ajax.ActionLink("Edit", "EditProfile", new { spId = profile.SearchProfileId }, ajaxOptions)</td>
        <td>@profile.SearchProfileName</td>
        <td>
            @if (profile.UserProfiles.Any()) {
                @(String.Join(", ", profile.UserProfiles.Select(u => u.UserName).ToArray()))
            } else {
                @Ajax.ActionLink("create", "CreateUserProfile", new { spId = profile.SearchProfileId }, ajaxOptions)
            }
        </td>
        <td>
            @if (profile.SimpleReports.Any()) {
                <text>yes</text>
            } else {
                @Ajax.ActionLink("enable", "EnableReports", new { spId = profile.SearchProfileId }, ajaxOptions )
            }
        </td>
        <td>@Ajax.ActionLink("Edit Contacts", "EditSearchProfileContacts", new { spId = profile.SearchProfileId }, ajaxOptions)</td>
    </tr>
}
</table>