@model ClientPortal.Web.Areas.Prog.Models.ExecSumVM
@{
    ViewBag.Title = "Executive Summary";
    var mtd = Model.MTDStat;
    var prev = Model.LastMonthStat;
}

<div id="client_bar_exec">
<div id="container">
    <div class="exec_charts">
        @* TODO: Put in separate partial view... *@
        <section>
            <div class="heading"><p>Month to Date: @mtd.StartDate.ToShortDateString() thru @mtd.Date.ToShortDateString()</p></div>
            <div class="grid">
                <table class="grid" cellspacing="0" width="100%">
                    <thead>
                        <tr class="exec">
                            <th>Budget</th>
                            <th>Spend</th>
                            <th>Pacing</th>
                            <th>Impressions</th>
                            <th>Clicks</th>
                            <th>CTR</th>
                            <th>eCPC</th>
                            <th>Conversions</th>
                            <th>eCPA</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="grey_row">
                            <td>@mtd.Budget.ToString("C")</td>
                            <td>@mtd.MediaSpend.ToString("C")</td>
                            <td>@mtd.Pacing.ToString("0.00%")</td>
                            <td>@mtd.Impressions.ToString("N0")</td>
                            <td>@mtd.Clicks.ToString("N0")</td>
                            <td>@mtd.CTR.ToString("0.00%")</td>
                            <td>@mtd.eCPC.ToString("C")</td>
                            <td>@mtd.Conversions.ToString("N0")</td>
                            <td>@mtd.eCPA.ToString("C")</td>
                        </tr>
		            </tbody>
                </table>
            </div>
        </section>
        <section>
            <div class="heading"><p>Previous Month: @prev.StartDate.ToShortDateString() thru @prev.Date.ToShortDateString()</p></div>
            <div class="grid">
                <table class="grid" cellspacing="0" width="100%">
                    <thead>
                        <tr class="exec">
                            <th>Budget</th>
                            <th>Spend</th>
                            <th>Pacing</th>
                            <th>Impressions</th>
                            <th>Clicks</th>
                            <th>CTR</th>
                            <th>eCPC</th>
                            <th>Conversions</th>
                            <th>eCPA</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="grey_row">
                            <td>@prev.Budget.ToString("C")</td>
                            <td>@prev.MediaSpend.ToString("C")</td>
                            <td>@prev.Pacing.ToString("0.00%")</td>
                            <td>@prev.Impressions.ToString("N0")</td>
                            <td>@prev.Clicks.ToString("N0")</td>
                            <td>@prev.CTR.ToString("0.00%")</td>
                            <td>@prev.eCPC.ToString("C")</td>
                            <td>@prev.Conversions.ToString("N0")</td>
                            <td>@prev.eCPA.ToString("C")</td>
                        </tr>
		            </tbody>
                </table>
            </div>
        </section>
        </div>
        <div class="client_logo_exec"></div>
        <div class="client_name_exec">@Model.UserInfo.ProgAdvertiser.Name</div>
    </div>
</div>

<div id="page_content">
    <div id="container">
        <div id="page_content_exec">
            <div id="exec_leftbar">
                <div class="heading"><p>Campaign to Date</p></div>
                <div class="content_box2">
                    <ul class="exec_leftchart">
                        <li class="axis">
                            <div class="label">Spend</div>
                            <div class="biglabel">$??.?K</div>
                        </li>
                        <li>
                            <div class="exec_spark" id="sparkSpend"></div>
                        </li>
                    </ul>
                </div>
                <div class="content_box2">
                    <ul class="exec_leftchart">
                        <li class="axis">
                            <div class="label">Impressions</div>
                            <div class="biglabel">?.?M</div>
                        </li>
                        <li>
                            <div class="exec_spark" id="sparkImpressions"></div>
                        </li>
                    </ul>
                </div>
                <div class="content_box2">
                    <ul class="exec_leftchart">
                        <li class="axis">
                            <div class="label">Clicks</div>
                            <div class="biglabel">?.?K</div>
                        </li>
                        <li>
                            <div class="exec_spark" id="sparkClicks"></div>
                        </li>
                    </ul>
                </div>
                <div class="content_box2">
                    <ul class="exec_leftchart">
                        <li class="axis">
                            <div class="label">Conversions</div>
                            <div class="biglabel">?</div>
                        </li>
                        <li>
                            <div class="exec_spark" id="sparkConversions"></div>
                        </li>
                    </ul>
                </div>
            </div>
            <div id="exec_right">
                @* <section... *@
            </div>
        </div>
    </div>
</div>

<div id="gridMTD"></div>
<div id="gridPrevMonth"></div>

@*<div id="ClickTD"></div>
<div id="ConversionTD"></div>*@

<div id="trendECPA"></div>

@section scripts {
<script>
    $(document).ready(function () {
        SetupSparklineCharts();
        //SetupMainChart();
    });

    function SetupMainChart()
    {
        var datasource = new kendo.data.DataSource({
            transport: {
                read: {
                    type: 'post',
                    dataType: 'json',
                    url: '@Url.Action("TestCalls", "Test")',
                }
            },
            schema: {
                model: {
                    id: 'Id',
                    fields: {
                        Date: { type: 'date' }
                        // rest of fields: numbers
                    }
                }
            }
        });
        $("#trendECPA").kendoChart({
            dataSource: datasource,
            series: [
                { field: "eCPA", type: "area", color: "rgb(13, 141, 214)", tooltip: { format: "{0:C}" } }
            ],
            categoryAxis: {
                field: "Date",
                labels: { rotation: -90, step: 5 },
                axisCrossingValue: [0, 2000],
                majorGridLines: { visible: false }
            },
            valueAxis: [
                { labels: { format: "C" } }
            ],
            tooltip: { visible: true }
        });
    }

    function SetupSparklineCharts()
    {
        $("#sparkSpend").kendoSparkline({
            type: "area",
            series: [
                { field: "MediaSpend", color: "rgb(13, 141, 214)", tooltip: { format: "{0:C}" } }
            ],
            dataSource: {
                transport: {
                    read: {
                        type: 'post',
                        dataType: 'json',
                        url: '@Url.Action("TestCalls", "Test")',
                    }
                }
            }
        });
        $("#sparkImpressions").kendoSparkline({
            type: "area",
            series: [
                { field: "Impressions", color: "rgb(13, 141, 214)", tooltip: { format: "{0:N0}" } }
            ],
            dataSource: {
                transport: {
                    read: {
                        type: 'post',
                        dataType: 'json',
                        url: '@Url.Action("TestCalls", "Test")',
                    }
                }
            }
        });
        $("#sparkClicks").kendoSparkline({
            type: "area",
            series: [
                { field: "Clicks", color: "rgb(13, 141, 214)", tooltip: { format: "{0:N0}" } }
            ],
            dataSource: {
                transport: {
                    read: {
                        type: 'post',
                        dataType: 'json',
                        url: '@Url.Action("TestCalls", "Test")',
                    }
                }
            }
        });
        $("#sparkConversions").kendoSparkline({
            type: "area",
            series: [
                { field: "Conversions", color: "rgb(13, 141, 214)", tooltip: { format: "{0:N0}" } }
            ],
            dataSource: {
                transport: {
                    read: {
                        type: 'post',
                        dataType: 'json',
                        url: '@Url.Action("TestCalls", "Test")',
                    }
                }
            }
        });
    }
</script>
}
