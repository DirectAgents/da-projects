@model IEnumerable<ClientPortal.Web.Models.GoalVM>

<h3>Goals</h3>

@foreach (var goal in Model)
{
    @Html.Partial("Item", goal)
}

<div id="addGoal">
    @Ajax.ActionLink("Add Goal", "Add", "Goals",
                     new AjaxOptions
                         {
                             InsertionMode = InsertionMode.Replace, UpdateTargetId = "windowGoal", HttpMethod = "GET",
                             OnBegin = "BeginAddGoal",
                             OnSuccess = "EnableValidation('#addGoalWrapper')"
                         })
</div>

<script>
    //TODO: move this to common script if used again
    function EnableValidation(selector) {
        $.validator.unobtrusive.parse($(selector));
    }

    function BeginAddGoal() {
        var win = $('#windowGoal').data("kendoWindow");
        win.setOptions({ width: 600, height: 500 });
        win.center();
        win.open();
    }

    $(function () {
        $('#windowGoal').kendoWindow({
            title: "Goal",
            visible: false,
            modal: true
        });
    });
</script>

<div id="windowGoal"></div>
