@model ClientPortal.Web.Models.IndexModel

<script>
    function DateChanged(grid) {
        $('#' + grid + '_dateRangeSel').data('kendoDropDownList').value('custom');
        $('#' + grid + '_filterBtn').attr('disabled', false);
    }

    function ChangeDateRange(grid, useUS) {
        var startId = '#' + grid + '_startdate';
        var endId = '#' + grid + '_enddate';
        var refresh = true;
        var dateRange = $('#' + grid + '_dateRangeSel').val();
        switch (dateRange) {
            case "today":
                $(startId).val('@Model.Dates.Today');
                $(endId).val('@Model.Dates.Today');
                break;
            case "yesterday":
                $(startId).val('@Model.Dates.Yesterday');
                $(endId).val('@Model.Dates.Yesterday');
                break;
            case "wtd":
                $(startId).val('@Model.Dates.FirstOfWeek');
                $(endId).val('@Model.Dates.Latest');
                break;
            case "mtd":
                $(startId).val('@Model.Dates.FirstOfMonth');
                $(endId).val('@Model.Dates.Latest');
                break;
            case "ytd":
                $(startId).val('@Model.Dates.FirstOfYear');
                $(endId).val('@Model.Dates.Latest');
                break;
            case "lastweek":
                $(startId).val('@Model.Dates.FirstOfLastWeek');
                $(endId).val('@Model.Dates.LastOfLastWeek');
                break;
            case "lastmonth":
                $(startId).val('@Model.Dates.FirstOfLastMonth');
                $(endId).val('@Model.Dates.LastOfLastMonth');
                break;
            default:
                refresh = false;
        }
        if (refresh)
            RefreshGrid(grid, useUS);
    }

    function ChangeDateRangeMY(grid) {
        var startId = '#' + grid + '_startdate';
        var endId = '#' + grid + '_enddate';
        var refresh = true;
        var dateRange = $('#' + grid + '_dateRangeSel').val();
        switch (dateRange) {
            case "prev3months":
                $(startId).val('@Model.Dates.ThreeMonthsAgoMY');
                $(endId).val('@Model.Dates.LastMonthMY');
                break;
            case "lastmonth":
                $(startId).val('@Model.Dates.LastMonthMY');
                $(endId).val('@Model.Dates.LastMonthMY');
                break;
            case "ytd":
                $(startId).val('@Model.Dates.FirstOfYearMY');
                $(endId).val('@Model.Dates.TodayMY');
                break;
            default:
                refresh = false;
        }
        if (refresh)
            RefreshGrid(grid);
    }

    function RefreshGrid(grid, useUS) {
        if (useUS)
            kendo.culture('en-US');@* show all in USD for now *@
        else
            kendo.culture(cultureGlobal);

        var gridDataSource = $('#' + grid + 'Grid').data('kendoGrid').dataSource;
        gridDataSource.read();
        if ($('#' + grid + 'Chart').length > 0) {
            var chartDataSource = $('#' + grid + 'Chart').data('kendoChart').dataSource;
            if (chartDataSource !== gridDataSource)
                chartDataSource.read();
        }
        $('#' + grid + '_filterBtn').attr('disabled', true);
    }
</script>