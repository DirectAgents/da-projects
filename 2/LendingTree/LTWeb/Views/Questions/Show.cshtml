@model LTWeb.Models.QuestionVM

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using (Html.BeginForm("Save", "Questions", FormMethod.Post, new { id = "questionForm" }))
{
    <input type="hidden" name="test" value="true" />
    @Html.Partial("ShowInner")
    LTWeb.Models.QuestionVM subquestion = Model.SamePageQuestion;
    while (subquestion != null)
    {
        <br />
        @Html.Partial("ShowInner", subquestion)
        subquestion = subquestion.SamePageQuestion;
    }
    <br />
    <input type="submit" value="Submit form (no javascript)" />
}

<br />
<input type="button" value="Save" onclick="Save()" />
@Html.ActionLink("Next", "Show", new { q = Model.QuestionIndex + 1, test = true })

<br /><br />
@Html.ActionLink("Save All", "SaveAll")

<br /><br />
<pre>@LTWeb.Session.LTModel.GetXMLForPost())</pre>

@section Scripts {
<script type="text/javascript">
    function Save() {
        var form = $('#questionForm');
        $.ajax({
            type: "POST",
            url: form.attr('action'),
            data: form.serialize(),
            success: function (response) {
                alert('success!');
            }
        });
    }
</script>
}